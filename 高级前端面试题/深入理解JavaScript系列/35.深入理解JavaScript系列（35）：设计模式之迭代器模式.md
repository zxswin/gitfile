# 深入理解 JavaScript 系列（35）：设计模式之迭代器模式

## 基本实现

```js
/**
 * 提供一种方法遍历一个聚合对象中各个元素，而又不暴露该对象内部表示。
 * 至少要有2个方法，hasNext()和Next()，这样才做做到遍历所有对象
 */
var agg = (function() {
  var index = 0,
    data = [1, 2, 3, 4, 5],
    length = data.length;

  return {
    next: function() {
      var element;
      if (!this.hasNext()) {
        return null;
      }
      element = data[index];
      index = index + 2;
      return element;
    },

    hasNext: function() {
      return index < length;
    },

    rewind: function() {
      index = 0;
    },

    current: function() {
      return data[index];
    }
  };
})();

// 迭代的结果是：1,3,5
while (agg.hasNext()) {
  console.log(agg.next());
}

// 重置
agg.rewind();
console.log(agg.current()); // 1
```
