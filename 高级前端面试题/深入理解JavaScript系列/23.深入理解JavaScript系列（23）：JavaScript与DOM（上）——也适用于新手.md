# 深入理解 JavaScript 系列（23）：JavaScript 与 DOM（上）——也适用于新手

## Script 元素

```html
<!-- 
  严格来说SCRIPT的TYPE属性应该设置为application/javascript，但是由于IE不支持这个，所以平时我们不得不写成text/javascript或者直接去掉type。

  // <![CDATA[ 是用来告诉支持XHTML的浏览器，这里面的代码是字符数据而不是XHTML标签，比如如果你在里面的数据使用了<或>，浏览器就不会再解析成XHTML标签了。
 -->
<script type="text/javascript">
  // <![CDATA[

  // ]]>
</script>
```

## Defer 属性

```html
<!-- 
  defer属性告诉浏览器加载完HTML文档以后再执行JS代码，但这个属性只能在IE下使用。
 -->
```

## 连接外部脚本

```html
<script type="text/javascript" src="my-script.js"></script>
```

## DOM 正文

- 访问 DOM 节点

```js
/**
 *
 */
// 现在有了该DOM节点，这个DOM节点展示的是该信息段落
var introParagraph = document.getElementById('intro');

// 'getElementsByTagName'返回的是一个节点集合
// - 和数组有点相似
var allUnorderedLists = document.getElementsByTagName('ul');
```

- getElementsByTagName

```js
/**
 * 重要的一个特性是他是live的——如果你在该元素里添加一个新的li元素，这个集合就会自动更新
 */
// 访问无序列表: [0]索引
var unorderedList = document.getElementsByTagName('ul')[0];

// 获取所有的li集合:
var allListItems = unorderedList.getElementsByTagName('li');

// 循环遍历
for (var i = 0, length = allListItems.length; i < length; i++) {
  // 弹出该节点的text内容
  alert(allListItems[i].firstChild.data);
}
```

- DOM 穿梭

```js
/* 
1.Node.childNodes: 访问一个单元素下所有的直接子节点元素，可以是一个可循环的类数组对象。该节点集合可以保护不同的类型的子节点（比如text节点或其他元素节点）。
2.Node.firstChild: 与‘childNodes’数组的第一个项(‘Element.childNodes[0]‘)是同样的效果，仅仅是快捷方式。
3.Node.lastChild: 与‘childNodes’数组的最后一个项(‘Element.childNodes[Element.childNodes.length-1]‘)是同样的效果，仅仅是快捷方式。shortcut.
4.Node.parentNode: 访问当前节点的父节点，父节点只能有一个，祖节点可以用‘Node.parentNode.parentNode’的形式来访问。
5.Node.nextSibling: 访问DOM树上与当前节点同级别的下一个节点。
6.Node.previousSibling: 访问DOM树上与当前节点同级别的上一个节点。

## 节点之间不能有空格，如果有空格需使用遍历判断nodeType类型
nodeType类型，1是元素，2是属性，3是text节点
 */
```
