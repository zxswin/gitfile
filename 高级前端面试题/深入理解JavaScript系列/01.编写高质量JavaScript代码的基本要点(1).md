# 深入理解 JavaScript 系列（1）：编写高质量 JavaScript 代码的基本要点

- 使用 var 定义变量

```js
/**
 * 通过var创建的全局变量（任何函数之外的程序中创建）是不能被删除的。
 * 无var创建的隐式全局变量（无视是否在函数中创建）是能被删除的。
 * 隐式全局变量并不是真正的全局变量，但它们是全局对象的属性。属性是可以通过delete操作符删除的，而变量是不能的：
 */
// 定义三个全局变量
var global_var = 1;
global_novar = 2; // 反面教材
(function() {
  global_fromfunc = 3; // 反面教材
})();

// 试图删除
delete global_var; // false
delete global_novar; // true
delete global_fromfunc; // true

// 测试该删除
typeof global_var; // "number"
typeof global_novar; // "undefined"
typeof global_fromfunc; // "undefined"

/**
 * 单var形式
 */
function func() {
  var a = 1,
    b = 2,
    sum = a + b,
    myobject = {},
    i,
    j;
  // function body...
}
```

- for 循环的最佳实践

```js
/**
 * 循环的时候缓存数组(或集合)的长度 就不用每次循环都去重新获取长度了
 * i = i + 1 或 i += 1 表达式之一来替换i++
 */
let myarray = [1, 2, 3, 4];

for (var i = 0, max = myarray.length; i < max; i = i + 1) {
  // 使用myarray[i]做点什么
}
```

- for-in 循环

```js
/**
 * for-in循环会遍历对象上所有的可枚举的属性(包括自身和原型链上)
 * hasOwnProperty() 判断属性是否是对象自身的属性(包括可枚举和不可枚举)
 */
var i,
  // 其好处在于在man对象重新定义hasOwnProperty情况下避免命名冲突。
  hasOwn = Object.prototype.hasOwnProperty;
for (i in man) {
  if (hasOwn.call(man, i)) {
    // 过滤
    console.log(i, ':', man[i]);
  }
}
```

- switch 模式

```js
/**
 * switch 开关转换
 */
var inspect_me = 0,
  result = '';
switch (inspect_me) {
  case 0:
    result = 'zero';
    break;
  case 1:
    result = 'one';
    break;
  default:
    result = 'unknown';
}
```

- Function() 和 eval()

```js
/**
 *  Function()里面定义的变量是局部变量 外部不可用访问到
 *  eval() 中定义的变量是全局变量 外部可用访问到
 */
console.log(typeof un); // "undefined"
console.log(typeof deux); // "undefined"
console.log(typeof trois); // "undefined"

/** 会污染全局变量  */
var jsstring = 'var un = 1; console.log(un);';
eval(jsstring); // logs "1"

/** new Function 中 不会污染全局变量  */
jsstring = 'var deux = 2; console.log(deux);';
new Function(jsstring)(); // logs "2"

/**
 * eval 放在自动执行函数中也不会污染全局变量
 */
jsstring = 'var trois = 3; console.log(trois);';
(function() {
  eval(jsstring);
})(); // logs "3"

console.log(typeof un); // number
console.log(typeof deux); // "undefined"
console.log(typeof trois); // "undefined"
```

## 资源地址

[原文地址](http://www.cnblogs.com/TomXu/archive/2011/12/28/2286877.html)
[转载自](http://www.zhangxinxu.com/wordpress/?p=1173)
