=============================================用户身份与文件权限。=============================================

管理员UID为0：系统的管理员用户。
系统用户UID为1～999： Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会有独立的系统用户负责运行，进而有效控制被破坏范围。
普通用户UID从1000开始：是由管理员创建的用于日常工作的用户。
一个用户只有一个基本用户组，但是可以有多个扩展用户组

useradd命令用于创建新的用户，格式为“useradd [选项] 用户名”。
默认的用户家目录会被存放在/home目录中，默认的Shell解释器为/bin/bash
默认会创建一个与该用户同名的基本用户组
-d	指定用户的家目录（默认为/home/username）
-e	账户的到期时间，格式为YYYY-MM-DD.
-u	指定该用户的默认UID
-g	指定一个初始的用户基本组（必须已存在）
-G	指定一个或多个扩展用户组
-N	不创建与用户同名的基本用户组
-s	指定该用户的默认Shell解释器

useradd -d /home/linux -u 8888 -s /sbin/nologin linuxprobe #创建普通用户
id linuxprobe #获取普通账号的相关信息

groupadd命令用于创建用户组，格式为“groupadd [选项] 群组名”。
groupadd ronny #创建用户组

usermod命令用于修改用户的属性，格式为“usermod [选项] 用户名”。
用户的信息保存在/etc/passwd文件中
usermod命令中的参数及作用
-c	填写用户账户的备注信息
-d -m	参数-m与参数-d连用，可重新指定用户的家目录并自动把旧的数据转移过去
-e	账户的到期时间，格式为YYYY-MM-DD
-g	变更所属用户组
-G	变更扩展用户组
-L	锁定用户禁止其登录系统
-U	解锁用户，允许其登录系统
-s	变更默认终端
-u	修改用户的UID
usermod -G root linuxprobe #将linuxprobe加入到root用户组中
usermod -u 8888 linuxprobe #修改用户的UID号码值

passwd命令用于修改用户密码、过期时间、认证信息等，格式为“passwd [选项] [用户名]”
普通用户只能使用passwd命令修改自身的系统密码
root用户可以修改所有普通用户的密码,而且不需要验证旧密码
-l	锁定用户，禁止其登录
-u	解除锁定，允许用户登录
--stdin	允许通过标准输入修改用户密码，如echo "NewPassWord" | passwd --stdin Username
-d	使该用户可用空密码登录系统
-e	强制用户在下次登录时修改密码
-S	显示用户的密码是否被锁定，以及密码所采用的加密算法名称
passwd #修改自己的密码
passwd linuxprobe #修改其他用户密码
passwd -l linuxprobe #锁定用户 禁止其登录
passwd -u linuxprobe #解除锁定 
passwd -S linuxprobe #显示用户是否被锁定  LK  PS 

userdel命令用于删除用户，格式为“userdel [选项] 用户名”
-f	强制删除用户
-r	同时删除用户及用户家目录
userdel -r linuxprobe #删除用户
id linuxprobe #查看用户是否存在 

=============================================文件权限与归属=============================================
-：普通文件。
d：目录文件。
l：链接文件。
b：块设备文件。
c：字符设备文件。
p：管道文件。

文件权限
可读（r）表示能够读取文件的实际内容
可写（w）表示能够编辑、新增、修改、删除文件的实际内容
可执行（x）表示能够运行一个脚本程序

文件目录权限
可读（r）表示能够读取目录内的文件列表
可写（w）表示能够在目录内新增、删除、重命名文件；
可执行（x）则表示能够进入该目录

使用数字表示权限
可读（r） - 4
可写（w） - 2
可执行（x - 1

=============================================文件的特殊权限=============================================
SUID是一种对二进制程序进行设置的特殊权限，可以让拥有执行权限的二进制程序的执行者临时拥有属主的权限
权限是rwx被赋予特殊权限后将变成小写的s rws
权限是rw- 被赋予特殊权限后将变成大写的S rwS
ls -l /bin/passwd #普通用户也能执行修改密码
-rwsr-xr-x. 1 root root 27832 Jan 29 2017 /bin/passwd

SGID
让执行者临时拥有属组的权限（对拥有执行权限的二进制程序进行设置）；
在某个目录中创建的文件自动继承该目录的用户组（只可以对目录进行设置）。
cd /tmp
mkdir testdir
ls -ald testdir/
chmod -Rf 777 testdir/
chmod -Rf g+s testdir/
ls -ald testdir/
drwxrwsrwx. 2 root root 6 Feb 11 11:50 testdir/

chmod命令设置文件或目录的权限，格式为“chmod [参数] 权限 文件或目录名称”。
chmod 760 test #设置文件权限

chown命令设置文件或目录的所有者和所属组格式为“chown [参数] 所有者:所属组 文件或目录名称”
chown root:bin test #设置文件的所有者和所属组

SBIT（Sticky Bit）特殊权限位了（也可以称之为特殊权限位之粘滞位）
当对某个目录设置了SBIT粘滞位权限后，那么该目录中的文件就只能被其所有者执行删除操作了。
/tmp作为一个共享文件的目录,默认已经设置了SBIT特殊权限位

当目录被设置SBIT特殊权限位后，文件的其他人权限部分的x执行权限就会被替换成t或者T，原本有x执行权限则会写成t，原本没有x执行权限则会被写成T。
ls -ald /tmp
drwxrwxrwt. 17 root root 4096 Feb 11 13:03 /tmp
chmod -R o+t linux/ #对目录设置粘滞位权限

=============================================文件的隐藏属性=============================================
chattr命令用于设置文件的隐藏权限，格式为“chattr [参数] 文件”
如果想要把某个隐藏功能添加到文件上，则需要在命令后面追加“+参数”，如果想要把某个隐藏功能移出文件，则需要追加“-参数”
i	无法对文件进行修改；若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或删除文件
a	仅允许补充（追加）内容，无法覆盖/删除内容（Append Only）
S	文件内容在变更后立即同步到硬盘（sync）
s	彻底从硬盘中删除，不可恢复（用0填充原文件所在硬盘区域）
A	不再修改这个文件或目录的最后访问时间（atime）
b	不再修改文件或目录的存取时间
D	检查压缩文件中的错误
d	使用dump命令备份时忽略本文件/目录
c	默认将文件或目录进行压缩
u	当删除该文件后依然保留其在硬盘中的数据，方便日后恢复
t	让文件系统支持尾部合并（tail-merging）
x	可以直接访问压缩文件中的内容

lsattr命令用于显示文件的隐藏权限，格式为“lsattr [参数] 文件”
ls -al linuxprobe #查看文件的隐藏权限
chattr -a linuxprobe #去除文件对应的隐藏文件

=============================================文件访问控制列表=============================================
文件的访问控制列表（ACL）对某个指定的用户进行单独的权限控制
如果针对某个目录设置了ACL，则目录中的文件会继承其ACL；若针对文件设置了ACL，则文件不再继承其所在目录的ACL。
置ACL其实就是针对指定的用户或用户组设置文件或目录的操作权限。

setfacl命令用于管理文件的ACL规则，格式为“setfacl [参数] 文件名称”
-R递归参数针对目录文件
-m参数针对普通文件
-b参数删除某个文件的ACL

setfacl -Rm u:linuxprobe:rwx /root #设置目录的ACL
ls -ld /root
dr-xrwx---+ 14 root root 4096 May 4 2017 /root #文件的权限最后一个点（.）变成了加号（+）,这就意味着该文件已经设置了ACL了

getfacl命令用于显示文件上设置的ACL信息，格式为“getfacl 文件名称”
getfacl /root


=============================================su命令与sudo服务=============================================
su命令可以解决切换用户身份的需求，使得当前用户在不退出登录的情况下，顺畅地切换到其他用户
当从root管理员切换到普通用户时是不需要密码验证的，而从普通用户切换成root管理员就需要进行密码验证了
su root #切换用户身份
su - linuxprobe #切换用户身份  
sudo命令把特定命令的执行权限赋予给指定用户

sudo [参数] 命令名称
sudo服务中的可用参数以及作用
-h	列出帮助信息
-l	列出当前用户可执行的命令
-u 用户名或UID值	以指定的用户身份执行命令
-k	清空密码的有效时间，下次执行sudo时需要再次进行密码验证
-b	在后台执行指定的命令
-p	更改询问密码的提示语
配置文件（/etc/sudoers）提供集中的用户管理、权限与主机等参数；
验证密码的后5分钟内（默认值）无须再让用户再次验证密码。

只有root管理员才可以使用visudo命令编辑sudo服务的配置文件。
使用sudo命令提供的visudo命令来配置用户权限

visudo
#谁可以使用  允许使用的主机=（以谁的身份）  可执行命令的列表
root ALL=(ALL) ALL
linuxprobe ALL=(ALL) ALL
sudo -l#查看到所有可执行的命令了
sudo ls /root #执行sudo命令
linuxprobe ALL=(ALL) /usr/bin/cat #可以执行指定命令

添加NOPASSWD参数，使得用户执行sudo命令时不再需要密码验证
linuxprobe ALL=NOPASSWD: /usr/sbin/poweroff

























单词:
such 这样的
sticky 粘性的



























